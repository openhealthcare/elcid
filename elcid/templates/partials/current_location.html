{% comment %}
  so what we want is to fall back episode if inpatientadmission is not available
{% endcomment %}


<div ng-show="patient.{{ models.InpatientAdmission.get_api_name }}.length && !patient.{{ models.InpatientAdmission.get_api_name }}[0].datetime_of_discharge" class="panel panel-default">
  <div ng-repeat="inpatientAdmission in [patient.{{ models.InpatientAdmission.get_api_name }}[0]]">
    <div class="panel-heading">
      <h3><i class="{{ models.InpatientAdmission.get_icon }}"></i> Location
      <i class="fa fa-pencil edit pull-right"
         ng-click="episode.recordEditor.editItem('inpatient_admission', 0)"></i></h3>
    </div>
    <div class="panel-body">
      <div class="row" ng-show="inpatientAdmission.datetime_of_admission">
        <div class="col-md-4">
          <b>Admitted</b>
        </div>
        <div class="col-md-8">
          [[ inpatientAdmission.datetime_of_admission | shortDate ]]
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <b>Hospital</b>
        </div>
        <div class="col-md-8">
          [[ inpatientAdmission.hospital ]]
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <b>Ward</b>
        </div>
        <div class="col-md-8">
          [[ inpatientAdmission.ward ]]
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <b>Bed</b>
        </div>
        <div class="col-md-8">
          [[ inpatientAdmission.bed ]]
        </div>
      </div>
    </div>
  </div>
</div>


<div ng-show="!patient.{{ models.InpatientAdmission.get_api_name }}.length" class="panel panel-default">
  <div class="panel-heading">
    <h3><i class="{{ models.InpatientAdmission.get_icon }}"></i> Location
    <i class="fa fa-pencil edit pull-right"
       ng-click="episode.recordEditor.editItem('location', 0)"></i>
    </h3>
  </div>
 <div class="panel-body">
   <span ng-hide="episode.category_name === 'Walkin'">
     <div class="row" ng-show="episode.start">
       <div class="col-md-4">
         <b>Admitted</b>
       </div>
       <div class="col-md-8">
         [[ episode.start | shortDate ]]
       </div>
     </div>
   </span>
   <span ng-show="episode.category_name === 'Walkin'">
     <div class="row" ng-show="episode.start">
       <div class="col-md-4">
         <b>Date</b>
       </div>
       <div class="col-md-8">
         [[ episode.start | shortDate ]]
       </div>
     </div>
   </span>
   <div class="row">
     <div class="col-md-4">
       <b>Hospital</b>
     </div>
     <div class="col-md-8">
       [[ episode.location[0].hospital ]]
     </div>
   </div>
   <div class="row">
     <div class="col-md-4">
       <b>Ward</b>
     </div>
     <div class="col-md-8">
       [[ episode.location[0].ward ]]
     </div>
   </div>
   <div class="row">
     <div class="col-md-4">
       <b>Bed</b>
     </div>
     <div class="col-md-8">
       [[ episode.location[0].bed ]]
     </div>
   </div>
 </div>
</div>
